<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <meta charset="UTF-8">
    <title>Listings</title>
<link href="static/listings.css" rel="stylesheet" type="text/css">
</head>
<body>
	<nav id="navbar"> 
	
    <a href="/"><img src="https://seeklogo.com/images/U/uc-santa-cruz-banana-slugs-logo-96320729C8-seeklogo.com.png" heigh="100" width="100"</img></a>
    <a href="/account" class="navele">Account</a>
    <a href="/listings" class="navele">Listings</a>
	<a href="/createlisting" class="navele">Create Listing</a>
  </nav>

   
    <input type="search" id="query" name="query" placeholder="Search"required><br><br>
    <button id="submit" onclick="updatePage()">Search</button>

<main id="main">
<ol id="ol">
	

	</ol>
</main>

</body>
<script>
   function updatePage() {
        $('#ol').empty()

       const url = `/getlistings?query=${query.value}`;

        // Populate dropdown with list of provinces
        $.getJSON(url, function (data) {
            $.each(data, function (key, entry) {
                     $('#ol').append(`<li>
		<a href="/listing/${entry.listing_id}"><img src="/listingpics/${entry.images[0]}" heigh="100" width="100"</img></a> <br></br>
	<a href="/listing/${entry.listing_id}">${entry.listing_name}</a>
        <p class="listdesc">${entry.listing_description}</p>
	</li>`);

            })
        });

    }
</script>
<script>
    $(function () {
        const url = '/getlistings';

        // Populate dropdown with list of provinces
        $.getJSON(url, function (data) {
            $.each(data, function (key, entry) {
                $('#ol').append(`<li>
		<a href="/listing/${entry.listing_id}"><img src="/listingpics/${entry.images[0]}" heigh="100" width="100"</img></a> <br></br>
	<a href="/listing/${entry.listing_id}">${entry.listing_name}</a>
        <p class="listdesc">${entry.listing_description}</p>
	</li>`);

            })
        });

    })
</script>
</html>